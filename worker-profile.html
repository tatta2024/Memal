<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Worker Profile | LinkMe</title>
  <link rel="icon" href="images/logo.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
  <div class="logo">
    <img src="images/logo.png" alt="LinkMe Logo">
    <span>LinkMe</span>
  </div>
  <nav>
    <a href="index.html">Home</a>
    <a href="services.html">Services</a>
    <a href="profile.html">Profile</a>
    <a href="login.html" onclick="logout()">Logout</a>
  </nav>
</header>

<section class="worker-profile-section">
  <h2>üßë‚Äçüîß Worker Profile</h2>

  <form id="workerForm" onsubmit="saveWorkerProfile(event)">

    <!-- PHOTO -->
    <label>Profile Photo (3√ó4)</label><br>
    <input type="file" id="photo" accept="image/*" onchange="previewPhoto(event)"><br>
    <img id="photoPreview" src="" alt="Photo Preview" style="display:none; width:120px; height:160px; margin:5px 0;"><br>

    <!-- BASIC INFO -->
    <input type="text" id="name" placeholder="Full Name" required>
    <input type="text" id="phone" placeholder="Phone Number" required>
    <input type="date" id="dob" required>

    <input type="text" id="birthPlace" placeholder="Birth Place">
    <input type="number" id="age" placeholder="Age">

    <select id="gender">
      <option value="">Gender</option>
      <option>Male</option>
      <option>Female</option>
    </select>

    <select id="marital">
      <option value="">Marital Status</option>
      <option>Single</option>
      <option>Married</option>
    </select>

    <!-- ADDRESS -->
    <input type="text" id="address" placeholder="Current Address">

    <!-- PROFESSION -->
    <input type="text" id="profession" placeholder="Profession (e.g. Electrician)">
    <textarea id="skills" placeholder="Skills & Experience"></textarea>

    <button type="submit">Save Profile</button>
  </form>

  <hr>

  <h3>üëÄ My Profile</h3>
  <div id="profileView"></div>
</section>

<script src="js/script.js"></script>
<script>
  // PREVIEW PHOTO
  function previewPhoto(event) {
    const reader = new FileReader();
    reader.onload = function(){
      const img = document.getElementById("photoPreview");
      img.src = reader.result;
      img.style.display = "block";
    };
    reader.readAsDataURL(event.target.files[0]);
  }

  // SAVE WORKER PROFILE
  function saveWorkerProfile(event) {
    event.preventDefault();
    const worker = {
      name: document.getElementById("name").value,
      phone: document.getElementById("phone").value,
      dob: document.getElementById("dob").value,
      birthPlace: document.getElementById("birthPlace").value,
      age: document.getElementById("age").value,
      gender: document.getElementById("gender").value,
      marital: document.getElementById("marital").value,
      address: document.getElementById("address").value,
      profession: document.getElementById("profession").value,
      skills: document.getElementById("skills").value,
      photo: document.getElementById("photoPreview").src || ""
    };
    localStorage.setItem("linkmeWorkerProfile", JSON.stringify(worker));
    alert("Profile saved successfully!");
    displayWorkerProfile();
  }

  // DISPLAY WORKER PROFILE
  function displayWorkerProfile() {
    const worker = JSON.parse(localStorage.getItem("linkmeWorkerProfile"));
    const container = document.getElementById("profileView");

    if (!worker) {
      container.innerHTML = "<p>No profile found.</p>";
      return;
    }

    container.innerHTML = `
      <img src="${worker.photo}" alt="Profile Photo" style="width:120px; height:160px;"><br>
      <p><b>Name:</b> ${worker.name}</p>
      <p><b>Phone:</b> ${worker.phone}</p>
      <p><b>DOB:</b> ${worker.dob}</p>
      <p><b>Birth Place:</b> ${worker.birthPlace}</p>
      <p><b>Age:</b> ${worker.age}</p>
      <p><b>Gender:</b> ${worker.gender}</p>
      <p><b>Marital Status:</b> ${worker.marital}</p>
      <p><b>Address:</b> ${worker.address}</p>
      <p><b>Profession:</b> ${worker.profession}</p>
      <p><b>Skills:</b> ${worker.skills}</p>
    `;
  }

  // LOAD PROFILE ON PAGE LOAD
  window.onload = displayWorkerProfile;
</script>

</body>
</html>
